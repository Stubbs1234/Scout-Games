<html>
<head>
<title>Upload A Game</title>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
<meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
    <!--<script type="text/javascript" src="js/tablet.js"></script>-->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script src="//www.parsecdn.com/js/parse-1.6.14.min.js"></script>
</head>
<body>
<div id="main">
<div id="nav">
<div id="nav_wrapper">
<ul>
<li><a href="homeCheck.html">Home</a></li>
<li><a href="search.html">Search For A Game</a></li>
<li><a href="upload.html">Upload A Game</a></li>
<li><a href="store.html">Subscription</a></li>
<li><a href="#">More</a>
<ul>
<li><a href="contactus.html">Contact Us</a></li>
<li><a href="myGames.html">My Games</a></li>
<li><a href="edit.html">Edit Profile</a></li>
  </ul>
  <li><a href="logout.html">Log Out</a></li>
</div>
</div>
<script type="text/javascript">
Parse.initialize("oTP5FJ4M9ESGzja1SrNcgDn7N07xtUmXqjyL4Da9", "8x1n5FZy4tEcXToWhjZYRkGukF1T28Lv0rL7BZKe", "JD1RtWwNcyc5q312ABc9saQ1ofvJNtxMycUlrOcA");
Parse.serverURL = 'https://parseapi.back4app.com'
	var user = Parse.User.current().get("groupName");
	document.addEventListener("DOMContentLoaded", function(event) {
   document.getElementById("group").value = user;
});
</script><br><br>
<h2 align="center">Upload A Game</h2>
<div id="show1">
<form name="upload" method="post" role="form">
<input type="text" name="name" placeholder="Name Of The Game" class="textFields"/>
<input type="text" name="Item" placeholder="Equipment" class="textFields"/>
<input type="file" id="profilePhotoFileUpload" name="Video" placeholder="Upload A Video" class="textFields"/>
<input type="text" name="des" placeholder="Description" class="textFields"/>
<input type="text" id="group" class="textFields"/>
<input id="uploadbutton" type="submit" value="Upload Game" class="buttons"/>
<input id="world" type="submit" value="Upload Game To The World" class="buttons"/>
</form>
</div>
<div id="show2" style="display:none;" align="center">
<h2>Please Wait</h2>
</div>
<script type="text/javascript">
Parse.initialize("oTP5FJ4M9ESGzja1SrNcgDn7N07xtUmXqjyL4Da9", "8x1n5FZy4tEcXToWhjZYRkGukF1T28Lv0rL7BZKe", "JD1RtWwNcyc5q312ABc9saQ1ofvJNtxMycUlrOcA");
Parse.serverURL = 'https://parseapi.back4app.com'
var con ="demo"
$('#uploadbutton').click(function () {
event.preventDefault();
$("#show1").hide();
$("#show2").show();
	var user = Parse.User.current().get("country");
	if (user == "United Kingdom") {
	con = "ukgames"
	} else if (user == "United States") {
	con = "usgames"
	} else if (user == "Canada") {
	con = "cangames"
	} else if (user == "Australia") {
	con = "ausgames"
	}
var fileUploadControl = $("#profilePhotoFileUpload")[0];
if (fileUploadControl.files.length > 0) {
  var file = fileUploadControl.files[0];
  var name = "Video.mp4";

  var parseFile = new Parse.File(name, file);
  
} else {
var r = confirm("Are you sure you do not want to upload video?");
if (r == true) {
    noVideo();
} else {
$("#show1").show();
$("#show2").hide();
}
}

parseFile.save().then(function() {
  // The file has been saved to Parse.
  alert("Video Saved");
}, function(error) {
  alert(error);
});

var name = upload.name.value;
var item = upload.Item.value;
var des = upload.des.value;
var group = upload.group.value;
var email = Parse.User.current().get("email");
var nameUploader = Parse.User.current().get("FirstName");
//"QWFTpM6Dkjo65WbW11GHcdg1L7l3ygpZIxAe3lZJ"
var GameUpload = Parse.Object.extend(con);
var gameUpload = new GameUpload();
gameUpload.set("NameGame", name);
gameUpload.set("item", item);
gameUpload.set("Video", parseFile);
gameUpload.set("des", des);
gameUpload.set("group", group);
//gameUpload.save();
gameUpload.save(null, {
  success: function(gameUpload) {
    // Execute any logic that should take place after the object is saved.
    alert("Saved");
    $("#show1").show();
    $("#show2").hide();
    var id = gameUpload.id;
    window.location.href = "http://scoutgames.co.uk/uploademail.php?email="+email+"&id="+id+"&con="+con;
  },
  error: function(gameUpload, error) {
    // Execute any logic that should take place if the save fails.
    // error is a Parse.Error with an error code and message.
    alert("Failed to create new object, with error code: " + error.message);
  }
})
});

$('#world').click(function () {
event.preventDefault();
$("#show1").hide();
$("#show2").show();
	var user = Parse.User.current().get("country");
	if (user == "United Kingdom") {
	con = "ukgames"
	} else if (user == "United States") {
	con = "usgames"
	} else if (user == "Canada") {
	con = "cangames"
	} else if (user == "Australia") {
	con = "ausgames"
	}
var fileUploadControl = $("#profilePhotoFileUpload")[0];
if (fileUploadControl.files.length > 0) {
  var file = fileUploadControl.files[0];
  var name = "Video.mp4";

  var parseFile = new Parse.File(name, file);
  
} else {
var r = confirm("Are you sure you do not want to upload video?");
if (r == true) {
    noVideoWorld();
} else {
$("#show1").show();
$("#show2").hide();
}}
parseFile.save().then(function() {
  // The file has been saved to Parse.
  alert("Video Saved");
}, function(error) {
  alert(error);
});
//upload world
var name = upload.name.value;
var item = upload.Item.value;
var des = upload.des.value;
var group = upload.group.value;
var email1 = Parse.User.current().get("email");
var nameUploader1 = Parse.User.current().get("FirstName");
//"QWFTpM6Dkjo65WbW11GHcdg1L7l3ygpZIxAe3lZJ"
var GameUpload = Parse.Object.extend("games");
var gameUpload = new GameUpload();
gameUpload.set("NameGame", name);
gameUpload.set("item", item);
gameUpload.set("Video", parseFile);
gameUpload.set("des", des);
gameUpload.set("group", group);
//gameUpload.save();
gameUpload.save(null, {
  success: function(gameUpload) {
    // Execute any logic that should take place after the object is saved.
    alert("Saved");
    $("#show1").show();
    $("#show2").hide();
    var con1 = "games";
    window.location.href = "http://scoutgames.co.uk/uploademailWorld.php?email="+email1+"&id="+id+"&con="+con1;
  },
  error: function(gameUpload, error) {
    // Execute any logic that should take place if the save fails.
    // error is a Parse.Error with an error code and message.
    alert("Failed to create new object, with error code: " + error.message);
  }
})
});
//No video upload
function noVideo() {
var name = upload.name.value;
var item = upload.Item.value;
var des = upload.des.value;
var group = upload.group.value;
var nameUploader2 = Parse.User.current().get("FirstName");
var email2 = Parse.User.current().get("email");
//"QWFTpM6Dkjo65WbW11GHcdg1L7l3ygpZIxAe3lZJ"
var GameUpload = Parse.Object.extend(con);
var gameUpload = new GameUpload();
gameUpload.set("NameGame", name);
gameUpload.set("item", item);
gameUpload.set("des", des);
gameUpload.set("group", group);
//gameUpload.save();
gameUpload.save(null, {
  success: function(gameUpload) {
    // Execute any logic that should take place after the object is saved.
    alert("Saved");
    var id = gameUpload.id
    $("#show1").show();
    $("#show2").hide();
    window.location.href = "http://scoutgames.co.uk/uploademail.php?email="+email2+"&id="+id+"&con="+con;
  },
  error: function(gameUpload, error) {
    // Execute any logic that should take place if the save fails.
    // error is a Parse.Error with an error code and message.
    alert("Failed to create new object, with error code: " + error.message);
  }
})
}
//world upload without video
function noVideoWorld() {
var name = upload.name.value;
var item = upload.Item.value;
var des = upload.des.value;
var group = upload.group.value;
var nameUploader3 = Parse.User.current().get("FirstName");
var email3 = Parse.User.current().get("email");
//"QWFTpM6Dkjo65WbW11GHcdg1L7l3ygpZIxAe3lZJ"
var GameUpload = Parse.Object.extend("games");
var gameUpload = new GameUpload();
gameUpload.set("NameGame", name);
gameUpload.set("item", item);
gameUpload.set("des", des);
gameUpload.set("group", group);
//gameUpload.save();
gameUpload.save(null, {
  success: function(gameUpload) {
    // Execute any logic that should take place after the object is saved.
    var con2 = "games";
    alert("Saved");
  $("#show1").show();
    $("#show2").hide();
    var id = gameUpload.id
    window.location.href = "http://scoutgames.co.uk/uploademailWorld.php?email="+email3+"&id="+id+"&con="+con2;
  },
  error: function(gameUpload, error) {
    // Execute any logic that should take place if the save fails.
    // error is a Parse.Error with an error code and message.
    alert("Failed to create new object, with error code: " + error.message);
  }
})
}
</script>

</div>
<div class="footer">
<small><p>Copyright &copy; Scout Games <span id="year"></span>, All rights reserved</p></small>
<small<p><a href="index.html">Login</a> | <a href="start/learn.html">Learn More</a> | <a href="store.html">Subscription</a></p></small>
<small><p>Powered By <a href="https://parse.com">Parse.com</a></p></small>
<script type="text/javascript">
var d = new Date();
var n = d.getFullYear();
document.getElementById("year").innerText = n;
</script>
</div>
</body>
</html>