<html>
<head>
<title>Edit your profile</title>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
<meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
   <!--<script type="text/javascript" src="js/tablet.js"></script>-->
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script src="//www.parsecdn.com/js/parse-1.6.14.min.js"></script>
</head>
<body>
<div id="main">
<div id="nav">
<div id="nav_wrapper">
<ul>
<li><a id="homeCheck.html">Your Home</a></li>
<li><a href="search.html">Search For A Game</a></li>
<li><a href="upload.html">Upload A Game</a></li>
<li><a href="store.html">Subscription</a></li>
<li><a href="#">More</a>
<ul>
<li><a href="contactus.html">Contact Us</a></li>
<li><a href="myGames.html">My Games</a></li>
<li><a href="edit.html">Edit Profile</a></li>
  </ul>
  <li><a href="logout.html">Log Out</a></li>
</div>
</div><br>
<script type="text/javascript">
Parse.initialize("oTP5FJ4M9ESGzja1SrNcgDn7N07xtUmXqjyL4Da9", "8x1n5FZy4tEcXToWhjZYRkGukF1T28Lv0rL7BZKe", "JD1RtWwNcyc5q312ABc9saQ1ofvJNtxMycUlrOcA");
Parse.serverURL = 'https://parseapi.back4app.com'
var fname = Parse.User.current().get("FirstName");
var lname = Parse.User.current().get("LastName");
var username = Parse.User.current().get("username");
var email = Parse.User.current().get("email");
var country = Parse.User.current().get("country");
var group = Parse.User.current().get("groupName");
document.addEventListener("DOMContentLoaded", function(event) {
    document.getElementById("fname").value = fname;
    document.getElementById("lname").value = lname;
    document.getElementById("username").value = username;
    document.getElementById("email").value = email;
    document.getElementById("country").value = country;
    document.getElementById("group").value = group;
});
</script>
<h2 align="center">Edit Your Profile</h2>
<div id="uploadForm">
<form name=signUpForm role="form">
<input type=text id="fname" class="textFields"/>
<input type=text id="lname" class="textFields"/>
<input type=text id="username" class="textFields"/>
<input type=text id="email" class="textFields"/>
<input type=text id="country" class="textFields"/>
<input type=text id="group" class="textFields"/>
</form>
</div><br>
<input id="update" type="submit" value="Update Your Details" class="buttons"/>
<input id="delete" type="submit" value="Delete Your Account" class="buttons"/>
<input id="forget" type="submit" value="Forgot Your Password" class="buttons"/>
<script type="text/javascript">
Parse.initialize("oTP5FJ4M9ESGzja1SrNcgDn7N07xtUmXqjyL4Da9", "8x1n5FZy4tEcXToWhjZYRkGukF1T28Lv0rL7BZKe", "JD1RtWwNcyc5q312ABc9saQ1ofvJNtxMycUlrOcA");
Parse.serverURL = 'https://parseapi.back4app.com'
$("#update").click(function () {
event.preventDefault();
var delObject = Parse.User.current().id;
var firstname = signUpForm.fname.value;
var lastname = signUpForm.lname.value;
var username = signUpForm.username.value;
var email = signUpForm.email.value;
var group = signUpForm.group.value;
var country = signUpForm.country.value;

var GameScore = Parse.Object.extend("_User");
var query = new Parse.Query(GameScore);
query.get(delObject, {
  success: function(results) {
  results.set("FirstName", firstname);
results.set("LastName", lastname);
results.set("username", username);
results.set("country", country);
results.set("email", email);
results.set("groupName", group);
results.save();
alert("Saved!");
    
  },
  error: function(error) {
    console.log(error);
  }
});
})
$("#delete").click(function () {
event.preventDefault();
  window.location.href = "https://www.paypal.com/cgi-bin/webscr?cmd=_subscr-find&alias=R6DWAVRCKCU68";
     })

$("#forget").click(function () {
event.preventDefault();
var email = Parse.User.current().get("email");
Parse.User.requestPasswordReset(email, {
  success: function() {
 alert("Please check your emails to reset your password");
  },
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
})
});



</script>
</div>
<div class="footer">
<small><p>Copyright &copy; Scout Games <span id="year"></span>, All rights reserved</p></small>
<small<p><a href="index.html">Login</a> | <a href="start/learn.html">Learn More</a> | <a href="store.html">Subscription</a></p></small>
<small><p>Powered By <a href="https://parse.com">Parse.com</a></p></small>
<script type="text/javascript">
var d = new Date();
var n = d.getFullYear();
document.getElementById("year").innerText = n;
</script>
</div>
</body>
</html>