<html>
<head>
<title>Scout Games</title>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
<meta name="description" content="My Parse App">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script src="//www.parsecdn.com/js/parse-1.6.14.min.js"></script>
</head>
<body>
<div id="main">
<div id="nav">
<div id="nav_wrapper">
<ul>
<li><a href="http://scoutgames.co.uk/index.html">Login</a></li>
</div>
</div><br>
<script type="text/javascript">
//xbyDEH1EvA
Parse.initialize("oTP5FJ4M9ESGzja1SrNcgDn7N07xtUmXqjyL4Da9", "8x1n5FZy4tEcXToWhjZYRkGukF1T28Lv0rL7BZKe", "JD1RtWwNcyc5q312ABc9saQ1ofvJNtxMycUlrOcA");
Parse.serverURL = 'https://parseapi.back4app.com'
var des = ""
var name = ""
var equipment = ""
$.urlParam = function(name){
    var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
    if (results==null){
       return null;
    }
    else{
       return results[1] || 0;
    }
}

var idob = $.urlParam('id');
var con = $.urlParam('con');
console.log($.urlParam('id'));
console.log($.urlParam('con'));
var GameScore = Parse.Object.extend(con);
var query = new Parse.Query(GameScore);
query.get(idob, {
  success: function(gameScore) {
name = gameScore.get("NameGame");
des = gameScore.get("des");
equipment = gameScore.get("item"); 
display();
  },
  error: function(object, error) {
    // The object was not retrieved successfully.
    // error is a Parse.Error with an error code and message.
  }
});
function display() {
document.getElementById("load1").innerHTML = name;
document.getElementById("load2").innerHTML = des;
document.getElementById("load3").innerHTML = equipment;
}

</script>
<h1 align="center">Scout Games</h1>
<h2 align="center">Name Of The Game:</h2>
<h3 id="load1" align="center"></h3>
<h2 align="center">Equipment Needed:</h2>
<h3 id="load3" align="center"></h3>
<h2 align="center">Description:</h2>
<h3 id="load2" align="center"></h3>
<div class="mainButton">
    <button class="button" id='video'>Video</button>
<script type="text/javascript">
var videoURL = ""
var idob = $.urlParam('id');
var con = $.urlParam('con');
$('#video').click(function () { 
var GameScore = Parse.Object.extend(con);;
var query = new Parse.Query(GameScore);
query.equalTo("objectId", idob);
query.first({
  success: function(object) {
var video = object.get("Video");
if (video == "undefined") {
alert(video);
} else {
alert(videoURL);
play();
}
},
  error: function(error) {
    alert("Error: " + error.code + " " + error.message);
  }
});
});

function play() {
if (videoURL == "undefined") {
alert("Sorry no video found!");
} else {
videoURL = video.url();
var url  = videoURL;
        var win = window.open(url, '_blank');
if(win){
    win.focus();
}else{
    alert('Please allow popups for this site');
}
}
}
</script>
</div>
</div>
</div>
</body>
</html>